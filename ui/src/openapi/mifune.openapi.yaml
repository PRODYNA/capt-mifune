{
  "openapi" : "3.0.3",
  "info" : {
    "title" : "Mifune API",
    "version" : "0.1.0-SNAPSHOT"
  },
  "security" : [ {
    "access_token" : [ ]
  } ],
  "tags" : [ {
    "name" : "data"
  }, {
    "name" : "domain"
  }, {
    "name" : "graph"
  }, {
    "name" : "source"
  }, {
    "name" : "statistic"
  } ],
  "paths" : {
    "/api/data/apocalypse" : {
      "delete" : {
        "tags" : [ "data" ],
        "summary" : "Reset the whole database",
        "description" : "Remove all nodes and relation and delete each constraint and index.",
        "operationId" : "apocalypseNow",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "text/event-stream" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "type" : "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/data/domain/{domainId}" : {
      "post" : {
        "tags" : [ "data" ],
        "summary" : "Import a domain",
        "description" : "Import a domain by its id. The domain must be available in the configured import directory.",
        "operationId" : "importDomain",
        "parameters" : [ {
          "name" : "domainId",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "data" ],
        "summary" : "Clear a domain",
        "description" : "Clear a domain by its id. All nodes and relations will be removed.",
        "operationId" : "clearDomain",
        "parameters" : [ {
          "name" : "domainId",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/data/domain/{domainId}/cancel" : {
      "post" : {
        "tags" : [ "data" ],
        "summary" : "Cancel a running import",
        "description" : "Cancel a running import by its domain id.",
        "operationId" : "cancelImport",
        "parameters" : [ {
          "name" : "domainId",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph" : {
      "get" : {
        "tags" : [ "graph" ],
        "summary" : "Fetch the whole graph",
        "description" : "Fetch the whole graph",
        "operationId" : "fetchGraph",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Graph"
                }
              }
            }
          }
        }
      },
      "post" : {
        "tags" : [ "graph" ],
        "summary" : "Persist the whole graph",
        "description" : "Persist the whole graph",
        "operationId" : "persistGraph",
        "responses" : {
          "201" : {
            "description" : "Created"
          }
        }
      }
    },
    "/api/graph/domain" : {
      "post" : {
        "tags" : [ "graph" ],
        "summary" : "Create a domain",
        "description" : "Create a domain",
        "operationId" : "createDomain",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/DomainCreate"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Domain"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/domain/{domainId}/keys" : {
      "get" : {
        "tags" : [ "graph" ],
        "summary" : "Fetch a domain keys",
        "description" : "Fetch a domain keys",
        "operationId" : "fetchDomainKeys",
        "parameters" : [ {
          "name" : "domainId",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "type" : "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/domain/{domainId}/mapping" : {
      "get" : {
        "tags" : [ "graph" ],
        "summary" : "Fetch a domain mapping",
        "description" : "Fetch a domain mapping",
        "operationId" : "fetchDomainMapping",
        "parameters" : [ {
          "name" : "domainId",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "additionalProperties" : {
                    "type" : "string"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/domain/{id}" : {
      "get" : {
        "tags" : [ "graph" ],
        "summary" : "Fetch a domain",
        "description" : "Fetch a domain",
        "operationId" : "fetchDomain",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Domain"
                }
              }
            }
          }
        }
      },
      "put" : {
        "tags" : [ "graph" ],
        "summary" : "Update a domain",
        "description" : "Update a domain",
        "operationId" : "updateDomain",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/DomainUpdate"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Domain"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "graph" ],
        "summary" : "Delete a domain",
        "description" : "Delete a domain",
        "operationId" : "deleteDomain",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GraphDelta"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/domains" : {
      "get" : {
        "tags" : [ "graph" ],
        "summary" : "Fetch all domains",
        "description" : "Fetch all domains",
        "operationId" : "fetchDomains",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "$ref" : "#/components/schemas/Domain"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/node" : {
      "post" : {
        "tags" : [ "graph" ],
        "summary" : "Create a node",
        "description" : "Create a node",
        "operationId" : "createNode",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/NodeCreate"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GraphDelta"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/node/{id}" : {
      "put" : {
        "tags" : [ "graph" ],
        "summary" : "Update a node",
        "description" : "Update a node",
        "operationId" : "updateNode",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/NodeUpdate"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GraphDelta"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "graph" ],
        "summary" : "Delete a node",
        "description" : "Delete a node",
        "operationId" : "deleteNode",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GraphDelta"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/relation" : {
      "post" : {
        "tags" : [ "graph" ],
        "summary" : "Create a relation",
        "description" : "Create a relation",
        "operationId" : "createRelation",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/RelationCreate"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GraphDelta"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/relation/{id}" : {
      "put" : {
        "tags" : [ "graph" ],
        "summary" : "Update a relation",
        "description" : "Update a relation",
        "operationId" : "updateRelation",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/RelationUpdate"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GraphDelta"
                }
              }
            }
          }
        }
      },
      "delete" : {
        "tags" : [ "graph" ],
        "summary" : "Delete a relation",
        "description" : "Delete a relation",
        "operationId" : "deleteRelation",
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "required" : true,
          "schema" : {
            "$ref" : "#/components/schemas/UUID"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/GraphDelta"
                }
              }
            }
          }
        }
      }
    },
    "/api/graph/reset" : {
      "post" : {
        "tags" : [ "graph" ],
        "summary" : "Reset the whole graph",
        "description" : "Reset the whole graph",
        "operationId" : "resetGraph",
        "responses" : {
          "201" : {
            "description" : "Created"
          }
        }
      }
    },
    "/api/sources" : {
      "get" : {
        "tags" : [ "source" ],
        "summary" : "List all sources",
        "description" : "List all sources",
        "operationId" : "sources",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "$ref" : "#/components/schemas/Source"
                  }
                }
              }
            }
          }
        }
      },
      "post" : {
        "tags" : [ "source" ],
        "summary" : "Upload a file",
        "description" : "Upload a file",
        "operationId" : "uploadFile",
        "requestBody" : {
          "content" : {
            "multipart/form-data" : {
              "schema" : {
                "type" : "object",
                "properties" : {
                  "file" : {
                    "$ref" : "#/components/schemas/FileUpload"
                  },
                  "name" : {
                    "type" : "string"
                  }
                }
              },
              "encoding" : {
                "file" : {
                  "contentType" : "application/octet-stream"
                },
                "name" : {
                  "contentType" : "text/plain"
                }
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK"
          }
        }
      }
    },
    "/api/statistic" : {
      "post" : {
        "tags" : [ "statistic" ],
        "summary" : "Query the graph",
        "description" : "Query the graph",
        "operationId" : "query",
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/Query"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "type" : "object",
                    "additionalProperties" : { }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/statistic/domain" : {
      "get" : {
        "tags" : [ "domain" ],
        "summary" : "Domain statistics",
        "description" : "Domain statistics",
        "operationId" : "domainStatistics",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "object",
                  "additionalProperties" : {
                    "format" : "int64",
                    "type" : "integer"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/statistic/domain/stream" : {
      "get" : {
        "tags" : [ "statistic" ],
        "summary" : "Domain statistics as stream",
        "description" : "Domain statistics",
        "operationId" : "domainStatisticsStream",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "text/event-stream" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "type" : "object",
                    "additionalProperties" : {
                      "format" : "int64",
                      "type" : "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/statistic/graph/stream" : {
      "get" : {
        "tags" : [ "statistic" ],
        "summary" : "Graph statistics as stream",
        "description" : "Graph statistics",
        "operationId" : "graphStatistics",
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "text/event-stream" : {
                "schema" : {
                  "type" : "array",
                  "items" : {
                    "$ref" : "#/components/schemas/GraphStatistics"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components" : {
    "schemas" : {
      "Direction" : {
        "enum" : [ "ASC", "DESC" ],
        "type" : "string"
      },
      "Domain" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "name" : {
            "type" : "string"
          },
          "rootNodeId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "file" : {
            "type" : "string"
          },
          "columnMapping" : {
            "type" : "object",
            "additionalProperties" : {
              "type" : "string"
            }
          },
          "modelValid" : {
            "type" : "boolean"
          },
          "mappingValid" : {
            "type" : "boolean"
          }
        }
      },
      "DomainCreate" : {
        "type" : "object",
        "properties" : {
          "name" : {
            "type" : "string"
          },
          "rootNodeId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "file" : {
            "type" : "string"
          },
          "columnMapping" : {
            "type" : "object",
            "additionalProperties" : {
              "type" : "string"
            }
          }
        }
      },
      "DomainUpdate" : {
        "type" : "object",
        "properties" : {
          "name" : {
            "type" : "string"
          },
          "rootNodeId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "file" : {
            "type" : "string"
          },
          "columnMapping" : {
            "type" : "object",
            "additionalProperties" : {
              "type" : "string"
            }
          }
        }
      },
      "FileUpload" : {
        "type" : "object"
      },
      "Filter" : {
        "type" : "object",
        "properties" : {
          "function" : {
            "$ref" : "#/components/schemas/FilterFunction"
          },
          "property" : {
            "type" : "string"
          },
          "value" : {
            "anyOf" : [ {
              "format" : "int32",
              "type" : "integer"
            }, {
              "format" : "int64",
              "type" : "integer"
            }, {
              "format" : "float",
              "type" : "number"
            }, {
              "type" : "boolean"
            }, {
              "type" : "string"
            } ]
          }
        }
      },
      "FilterFunction" : {
        "enum" : [ "EQUAL", "LESS", "GREATER" ],
        "type" : "string"
      },
      "Graph" : {
        "type" : "object",
        "properties" : {
          "domains" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Domain"
            }
          },
          "nodes" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Node"
            }
          },
          "relations" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Relation"
            }
          }
        }
      },
      "GraphDelta" : {
        "type" : "object",
        "properties" : {
          "trigger" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "changedDomains" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Domain"
            }
          },
          "removedDomains" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "changedNodes" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Node"
            }
          },
          "removedNodes" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "changedRelations" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Relation"
            }
          },
          "removedRelations" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          }
        }
      },
      "GraphStatistics" : {
        "type" : "object",
        "properties" : {
          "nodes" : {
            "format" : "int64",
            "type" : "integer"
          },
          "relations" : {
            "format" : "int64",
            "type" : "integer"
          }
        }
      },
      "Node" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "label" : {
            "type" : "string"
          },
          "domainIds" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "color" : {
            "type" : "string"
          },
          "properties" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Property"
            }
          }
        }
      },
      "NodeCreate" : {
        "required" : [ "label" ],
        "type" : "object",
        "properties" : {
          "label" : {
            "pattern" : "\\S",
            "type" : "string"
          },
          "domainIds" : {
            "minItems" : 1,
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "color" : {
            "type" : "string"
          },
          "properties" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Property"
            }
          }
        }
      },
      "NodeUpdate" : {
        "required" : [ "label" ],
        "type" : "object",
        "properties" : {
          "label" : {
            "pattern" : "\\S",
            "type" : "string"
          },
          "domainIds" : {
            "minItems" : 1,
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "color" : {
            "type" : "string"
          },
          "properties" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Property"
            }
          }
        }
      },
      "OrderField" : {
        "type" : "object",
        "properties" : {
          "field" : {
            "type" : "string"
          },
          "direction" : {
            "$ref" : "#/components/schemas/Direction"
          }
        }
      },
      "Property" : {
        "type" : "object",
        "properties" : {
          "name" : {
            "type" : "string"
          },
          "type" : {
            "$ref" : "#/components/schemas/PropertyType"
          },
          "primary" : {
            "type" : "boolean"
          }
        }
      },
      "PropertyType" : {
        "enum" : [ "int", "long", "double", "float", "string", "boolean", "date" ],
        "type" : "string"
      },
      "Query" : {
        "type" : "object",
        "properties" : {
          "nodes" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/QueryNode"
            }
          },
          "relations" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/QueryRelation"
            }
          },
          "results" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/QueryResultDefinition"
            }
          },
          "orders" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/OrderField"
            }
          },
          "filters" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Filter"
            }
          },
          "distinct" : {
            "type" : "boolean"
          },
          "limit" : {
            "format" : "int64",
            "type" : "integer"
          }
        }
      },
      "QueryFunction" : {
        "enum" : [ "value", "min", "max", "avg", "sum", "count", "hierarchyCalculation" ],
        "type" : "string"
      },
      "QueryNode" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "varName" : {
            "type" : "string"
          },
          "nodeId" : {
            "$ref" : "#/components/schemas/UUID"
          }
        }
      },
      "QueryRelation" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "varName" : {
            "type" : "string"
          },
          "relationId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "sourceId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "targetId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "depth" : {
            "type" : "string"
          }
        }
      },
      "QueryResultDefinition" : {
        "type" : "object",
        "properties" : {
          "name" : {
            "type" : "string"
          },
          "function" : {
            "$ref" : "#/components/schemas/QueryFunction"
          },
          "parameters" : {
            "type" : "array",
            "items" : {
              "type" : "string"
            }
          }
        }
      },
      "Relation" : {
        "required" : [ "type" ],
        "type" : "object",
        "properties" : {
          "id" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "sourceId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "targetId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "domainIds" : {
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "type" : {
            "pattern" : "\\S",
            "type" : "string"
          },
          "primary" : {
            "type" : "boolean"
          },
          "multiple" : {
            "type" : "boolean"
          },
          "color" : {
            "type" : "string"
          },
          "properties" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Property"
            }
          }
        }
      },
      "RelationCreate" : {
        "required" : [ "type", "sourceId", "targetId", "domainIds" ],
        "type" : "object",
        "properties" : {
          "type" : {
            "pattern" : "\\S",
            "type" : "string"
          },
          "sourceId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "targetId" : {
            "$ref" : "#/components/schemas/UUID"
          },
          "domainIds" : {
            "minItems" : 1,
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "primary" : {
            "type" : "boolean"
          },
          "multiple" : {
            "type" : "boolean"
          },
          "properties" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Property"
            }
          }
        }
      },
      "RelationUpdate" : {
        "required" : [ "type", "domainIds" ],
        "type" : "object",
        "properties" : {
          "type" : {
            "pattern" : "\\S",
            "type" : "string"
          },
          "domainIds" : {
            "minItems" : 1,
            "uniqueItems" : true,
            "type" : "array",
            "items" : {
              "format" : "uuid",
              "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
              "type" : "string"
            }
          },
          "primary" : {
            "type" : "boolean"
          },
          "multiple" : {
            "type" : "boolean"
          },
          "properties" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/Property"
            }
          }
        }
      },
      "Source" : {
        "type" : "object",
        "properties" : {
          "name" : {
            "type" : "string"
          },
          "header" : {
            "type" : "array",
            "items" : {
              "type" : "string"
            }
          }
        }
      },
      "UUID" : {
        "format" : "uuid",
        "pattern" : "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}",
        "type" : "string"
      }
    },
    "securitySchemes" : {
      "access_token" : {
        "type" : "http",
        "scheme" : "Bearer"
      },
      "SecurityScheme" : {
        "type" : "openIdConnect",
        "description" : "Authentication",
        "openIdConnectUrl" : "http://localhost:8080/auth/realms/master/.well-known/openid-configuration"
      }
    }
  }
}